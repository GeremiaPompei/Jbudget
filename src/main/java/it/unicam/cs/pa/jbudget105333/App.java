/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package it.unicam.cs.pa.jbudget105333;

import it.unicam.cs.pa.jbudget105333.Controller.MainController;
import it.unicam.cs.pa.jbudget105333.Controller.MainControllerBase;
import it.unicam.cs.pa.jbudget105333.View.ConsoleView.ConsoleView;
import it.unicam.cs.pa.jbudget105333.View.GUIView.GUIView;
import it.unicam.cs.pa.jbudget105333.View.View;

import java.io.IOException;

public class App {

    private final MainController controller;
    private final View view;

    /**
     * Costruttore di App che prende un Controller di budgetReport e una View
     */
    public App(MainController controller, View view) {
        this.controller = controller;
        this.view = view;
    }

    /**
     * Metodo main che genera un'App con un factory method e vi esegue il metodo start
     */
    public static void main(String[] args) {
        if(args.length == 0)
           createApp(new GUIView()).start();
        else
            if(args[0].equalsIgnoreCase("console"))
                createApp(new ConsoleView()).start();
            else
                System.out.println("No View Found!");
    }

    //Metodo start che fa partire il metodo open con parametro un viewController e metodo close della view
    private void start() {
        try {
            this.view.open(this.controller);
        } catch (IOException e) {
            e.printStackTrace();
        }
        this.view.close();
    }

    //Factory method che crea l'App da un budgetReportController e una View
    private static App createApp(View view) {
        MainController mainController= new MainControllerBase();
        return  new App(mainController,view);
    }
}
